<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[function cancel_adding(){
	GlideDialogWindow.get().destroy();	
	return false;
}

function add_time(isNotFromButton){
	var duration = $j('#duration').val();
	var isOnDuty = $j('#c_on_duty').is(":checked");
	if(duration <= 0){
		return alert('Duration should be more than 0!');
	}else{
		
		var ga = new GlideAjax('x_play4_sls.addTimeSpent');
		ga.addParam('sysparm_name', 'slsAddTimeSpent');
		ga.addParam('sysparm_inc_id', g_form.getUniqueValue());
		ga.addParam('sysparm_duration', duration);
		ga.addParam('sysparm_onduty', isOnDuty);
		ga.addParam('sysparm_affbc', g_form.getValue('sls_business_service'));
		ga.getXML(getResponse);
	}
	function getResponse(response) {
// 		if(isNotFromButton){
// 			g_form.save();
// 		}
		var answer = response.responseXML.documentElement.getAttribute("answer");
		return answer; 
	}
	GlideDialogWindow.get().destroy();
	
}
]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_play4_sls_sls_add_time_spent.do</endpoint>
        <html><![CDATA[<?xml version="1.0" encoding="utf-8" ?>
<j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null">
	<g2:evaluate var="jvar_isCallOnSubmit" expression="RP.getWindowProperties().isCallOnSubmit" />
	  	<h5 style="color:#4286f4">Inserted value will be added to existing time duration</h5>
		<div class="form-group">
			<label for="duration">Time spent:</label>
			<input class="form-control" type="number" min="1" max="999" autofocus="autofocus" id="duration" placeholder="How much time was spent (in minutes)?" name="duration"></input>
		</div>
		<div class="form-group">
			<input id="c_on_duty" type="checkbox"></input>
			<label for="c_on_duty" class="label-text">On duty</label>
		</div>
		<div style="margin-top:25px;float:right;">
			<g:dialog_buttons_ok_cancel ok = "return add_time(${jvar_isCallOnSubmit})" cancel="return cancel_adding()"/>
		</div>
</j:jelly>]]></html>
        <name>sls_add_time_spent</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>mihailz</sys_created_by>
        <sys_created_on>2020-04-01 10:34:30</sys_created_on>
        <sys_id>466bd61fdb3bc8d03a7d983cca96190d</sys_id>
        <sys_mod_count>26</sys_mod_count>
        <sys_name>sls_add_time_spent</sys_name>
        <sys_package display_value="SLS" source="x_play4_sls">722b5d68dbaac414e9ae96f8f496198d</sys_package>
        <sys_policy/>
        <sys_scope display_value="SLS">722b5d68dbaac414e9ae96f8f496198d</sys_scope>
        <sys_update_name>sys_ui_page_466bd61fdb3bc8d03a7d983cca96190d</sys_update_name>
        <sys_updated_by>mihailz</sys_updated_by>
        <sys_updated_on>2020-04-02 07:46:44</sys_updated_on>
    </sys_ui_page>
</record_update>
